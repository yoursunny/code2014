超声波水下扩频通信系统的设计
阳光男孩 发表于 2008-01-10 | 《数字信号处理》课程作业

<h2>一、认识超声波</h2>
<p>声音是一种压力波：介质分子有规律的振动，是周围的介质产生疏密变化，这就产生了声波。声音作为波的一种，可以通过傅立叶变换分解为不同频率不同强度正弦波的叠加。人耳可以听到的声音的频率范围是20Hz～20kHz，高于这个范围的波动称为超声波。通常认为，超声波的频率范围是20kHz～500kHz。狗和蝙蝠等动物可以听到高达160kHz的声音，因此超声波只是对人而言。</p>
<p>超声波的传播速度与在相同介质中普通声波的传播速度相同：0℃海平面的空气中是332m/s，水中是1450m/s，铁中是5000m/s。介质密度愈大，音速愈快。在空气中，音速会依空气之状态（如湿度、温度、密度）不同而有不同数值，如一万米高空之音速约为295m/s，每升高1℃音速增加0.607m/s。</p>
<p>超声波在介质中传播时，由于超声波与介质的相互作用，会产生以下四种效应：机械效应、空化作用、热效应、化学效应。</p>
<p>超声波的特点：传播方向性强、能量易于集中；能在各种不同介质中传播、可传播足够远的距离；与介质的相互作用适中、易于携带有关介质状态的信息。</p>
<p>超声波的应用，按功率大小分为功率超声和检测超声两种：功率超声通常只发射不接收，用于焊接、钻孔、粉碎、清洗、乳化等；检测超声用于雷达定位、医用检查（但超声波不能穿透骨头、因此不能完全替代X光）。</p>
<h2>二、超声波水下扩频通信理论基础</h2>
<h3>水声信道</h3>
<p>在水下利用声波进行数字通信，其信道模型称为水声信道。水声信道是一个非常复杂时变、空变、频变的信道，其主要特征表现为：传播损失、多径效应、频散效应。
浅海中，主要的环境噪声有：海水热噪声（50kHz～200kHz）、水动力噪声（500Hz～50kHz）等。</p>
<h3>多径效应</h3>
<p>在无线通信领域，多径指无线电信号从发射天线经过多个路径抵达接收天线的传播现象。多径会导致信号的衰落和相移。通过较长的路径到达接收天线的信号分量比以较短路径到达天线的信号稍迟。电视信号传输中，因为电视电子枪扫描是由左到右，迟到的信号会在早到的信号形成的电视画面上叠加一个稍稍靠右的虚像。雷达上，单个目标会由于地形反射在雷达接收机上产生一个或多个虚像；为克服这一问题，雷达接收端需要将信号与附近的地形图相比对，将由反射产生的看上去在地面以下或者在一定高度以上的信号去除。在数字无线通信系统中，多径效应产生的符号间干扰（ISI）会影响到信号传输的质量。</p>
<p>超声波在水中传输，极易发生多径效应。在时域上，信道的多径效应表现为：信道的冲激响应是sinc函数与噪声的叠加。</p>
<p>由于超声波传播方向性强，在使用定向天线的情况下，多径效应的信道可以看成一个FIR系统与噪声的叠加。当码元速率较低时（两个码元的间隔时间≥FIR系统的脉冲响应长度），多径效应就不会导致ISI，从而可以忽略。</p>
<h3>扩频通信</h3>
<p>超声波易于携带有关介质状态的信息，对通信而言就是容易受到信道的干扰。为了减小干扰、噪声对通信质量的影响，本设计方案将使用扩频通信，具体扩频方案是DSSS/CDMA；选用这个方案，在提高通信质量的同时，也提高了通信的保密性——因为CDMA所用的PN序列是别人不知道的，相当于对称加密的密钥。但是，扩频通信需要较高的码元速率码元速率，而多径效应使码元速率不可太大，这导致本通信系统可以承载的信息速率比较低。</p>
<h2>三、系统特性参数</h2>
<ul>
<li>远程水声信道只能传输10kHz以下的信号，超声波的传输距离较近（几百米），功率可以大一些、忽略传播损失</li>
<li>二进制码元速率1.2kbps，传送低速数字信号，此速率下多径效应不会导致ISI，可以忽略多径效应</li>
<li>CDMA的chip rate是307.2kbps，即输入数字信号码元速率的256倍</li>
<li>所需带宽：海洋水声信道的信噪比设为3dB（信噪比的dB表示是<img src="MathType1.jpg" alt="(公式)">，可反推得信噪比绝对数值为1.995），由香农公式（带噪信道容量公式<img src="MathType2.jpg" alt="(公式)">）计算得最小带宽为194kHz。选用带宽范围是240kHz～460kHz，这个带宽范围避开了主要的海洋环境噪声。FSK调制在250kHz～450kHz范围，而在242kHz和458kHz频率上固定发送持续信号，用于多普勒频移的检测。</li>
<li>最好使用定向天线</li>
<li>允许发送端与接收端的低速移动，具有多普勒频移的检测和适应能力</li>
</ul>
<p>本设计中，将重点关注CDMA扩频、多普勒频移的检测和适应，因此选择了上述特性参数及假设。</p>
<h3>四、发送端的设计</h3>
<p>发送端的输入、中间结果、输出：</p>
<ul>
<li>发送端的输入：1.2kbps二进制数字信号</li>
<li>发送端的中间结果1：CDMA扩频，307.2kbps二进制数字信号</li>
<li>发送端的中间结果2：插入同步信号</li>
<li>发送端的中间结果3：信道编码结果</li>
<li>发送端的输出：FSK调制，得到240kHz～460kHz的超声波信号，接到超声换能器</li>
</ul>
<p>由上可见，发送端的工作分为五步完成：</p>
<ol>
<li>CDMA扩频：将输入信号乘以PN序列（PN序列总长65536点），每1点输入信号需要与256点PN序列在时域相乘并得到256点中间结果</li>
<li>插入同步：每65536点的开头，插入同步信号，同步信号是256个1；在CDMA扩频后的信号中，几乎不可能有256个连续的1</li>
<li>信道编码</li>
<li>FSK调制：将307.2kbps的二进制信号进行FSK调制。串并转换，16进制FSK，中心频率分别为0→256.25kHz、1→268.75kHz、2→281.25kHz、3→293.75kHz、4→306.25kHz、5→318.75kHz、6→331.25kHz、7→343.75kHz、8→356.25kHz、9→368.75kHz、10→381.25kHz、11→393.75kHz、12→406.25kHz、13→418.75kHz、14→431.25kHz、15→443.75kHz。在242kHz和458kHz增加两条固定、持续的谱线，用于多普勒频移的检测。</li>
<li>1MHz的D/A转换，模拟放大，使用超声换能器发出信号</li>
</ol>
<p>发送端的框图如下：<br><img src="sender.png" alt="发送端框图"></p>
<h3>五、接收端的设计</h3>
<ul>
<li>接收端的输入：FSK(CDMA信号+插入的同步信号)+叠加的噪声+多普勒频移</li>
<li>接收端的中间结果1：经过模拟放大、滤波的输入信号</li>
<li>接收端的中间结果2：能够适应多普勒频移的FSK解调获得的二进制数字信号，此信号包括(CDMA信号+插入的同步信号+叠加的噪声)</li>
<li>接收端的中间结果3：信道解码结果，假定几乎不含噪声干扰，只是(CDMA信号+插入的同步信号)</li>
<li>接收端的中间结果4：按同步信号分段为每段65536点的307.2kbps二进制数字信号</li>
<li>接收端的输出：1.2kbps的二进制数字信号</li>
</ul>
<p>由上可见，接收端的工作分为五步完成：</p>
<ol>
<li>超声换能器采集信号，前置模拟放大（要求低噪声、高共模抑制比），200kHz～500kHz带通滤波</li>
<li>1MHz的A/D转换，256点FFT分析，找到幅度最大的三条谱线，频率低的和高的分别对应原来在242kHz、458kHz的两条固定谱线，频率中间的对应FSK调制结果；计算FSK调制所得谱线的原频率，获得对应的16进制值，然后并串转换。</li>
<li>信道解码</li>
<li>查找同步信号，分段</li>
<li>解扩：乘以按分段对齐的PN序列；判决：将256点求和S，S＞127判为1、S≤128判为0</li>
</ol>
<p>接收端的框图如下：<br><img src="receiver.png" alt="接收端框图"></p>
<h2>六、技术指标</h2>
<ul>
<li>选用的D/A和A/D采样率为1MHz，这是信号传输频率决定的。</li>
<li>作为水下通信系统，需要满足通信级可靠性指标。</li>
<li>作为类似于“短消息”的数据业务，若DSP芯片性能不足，可以不要求实时性，处理1.2k字节数据，10秒的延迟是可以接受的。</li>
<li>作为水下通信系统，可用电力相当有限，必须注意芯片和超声换能器的功耗。尽可能选择低电压、低功耗的芯片，可以考虑超声换能器的功率根据当前信号强度自适应调整。</li>
</ul>
<p>芯片选择：CY7C1371C可以满足要求</p>
<h2>七、系统仿真</h2>
<p>由于本设计方案的很多功能相当复杂，MATLAB并不支持，跳过这部分</p>
<h2>八、感想和体会</h2>
<p>本人主要开发信息系统，对通信系统、DSP并不熟悉。因此，这个设计方案只是停留在框架层面，有很多细节没有解决，比如：PN序列如何产生？同步信号如何插入和检测？信道编码选用何种方案？</p>
<p>做这个设计，需要查很多资料，参考资料列得满满的；学会查资料，是做设计的前提之一；要尊重原作者的著作权，即使是学习与研究用途，也应注明完整的出处，而不能只写“参考资料：谷歌、百度、雅虎、搜狗”。</p>
<h2>参考资料</h2>
<ol>
<li>声音 - wikipedia，http://zh.wikipedia.org/wiki/声音</li>
<li>超声波 - wikipedia，http://zh.wikipedia.org/wiki/超声波</li>
<li>音速 - wikipedia，http://zh.wikipedia.org/wiki/音速</li>
<li>超声波_百度百科，http://baike.baidu.com/view/32371.htm</li>
<li>多径 - wikipedia，http://zh.wikipedia.org/wiki/多径效应</li>
<li>论GPS测量中的多径误差，谢世杰 种绍龙 袁铭，《测绘通报》2003年5期，ftp://202.120.203.253:8092/2003ZK05/P2/93318X/000/005/7901809.pdf</li>
<li>水声信道的建模与仿真研究，涂峰 黄瑞光，《微计算机信息》2003年5期，ftp://202.120.203.253:8092/2003GC19/TN6/90452X/019/005/7851186.pdf</li>
<li>一个水声扩频通信系统设计与实现，黄晓萍 桑恩方，《海洋工程》2007年1期，ftp://202.120.203.253:8097/2007GC120/TB4/90248X/025/001/25114609.pdf</li>
<li>扩频技术概述，http://www.cnebuyer.com/bbs/tech/20071124224314.htm</li>
<li>频移键控调制的直序列扩频技术在水声遥控引信中的应用研究，彭纪肖 张歆 程刚，《探测与控制学报》2006年3期，ftp://202.120.203.253:8096/2006GC111/TN6/97899A/028/003/22392233.pdf</li>
<li>海洋环境噪声，http://www.hoodong.com/wiki/海洋环境噪声</li>
<li>计算机网络基础知识——数据通信技术，http://www.huibo.org.cn/NetworkTheory/21.htm</li>
<li>DSP芯片的选择[通信技术资源网]，http://www.edabbs.com/bbs/dispbbs.asp?boardID=48&amp;ID=434&amp;page=9</li>
</ol>