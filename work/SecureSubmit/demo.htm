<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>SecureSubmit演示</title>
<script type="text/javascript" src="prototype-tiny.js"></script>
<script type="text/javascript" src="BigInt.js"></script>
<script type="text/javascript" src="DES.js"></script>
<script type="text/javascript" src="SecureSubmit.js"></script>
</head>

<body>
演示：
<input type="text" id="p" />
<input type="button" onclick="doSubmit();parent.c('demo-run')" value="提交密码"/>
<br/>提交密码过程中欢迎抓包<br/>
<div id="status"></div>
<script type="text/javascript">
function doSubmit() {
	var now=function(){var d=new Date();return d.getHours()+':'+d.getMinutes()+':'+d.getSeconds()+'.'+d.getMilliseconds();}
	var password=document.getElementById('p').value;
	var u=new SecureSubmit('handler.php');
	document.getElementById('status').innerHTML=now()+' 正在协商密钥';
	u.prepare(function(){
		document.getElementById('status').innerHTML+='<br/>'+now()+' 协商完毕，正在提交';
		u.save(password,function(){
			document.getElementById('status').innerHTML+='<br/>'+now()+' 提交成功，<a href="handler.php?a=show" target="_blank" onclick="parent.c(\'demo-show\')">显示提交的密码</a>';
		});
	});
}
</script>
</body>
</html>
